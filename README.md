# Задание: Дипломный проект профессии «1C-программист: с нуля до middle»

## Кастомизация конфигурации «Управление IT-фирмой для компании «Ваш компьютерный мастер»

### Цель дипломного проекта

Разработать и подготовить к эксплуатации новый функциональный блок в конфигурации «Управление IT-фирмой».

Вам нужно:

- реализовать новые подсистемы «Работа с заявками клиентов» и «Расчёт управленческой зарплаты» в соответствии с требованиями заказчика,
- подготовить отчёты по новой функциональности,
- оформить инструкцию по начальной настройке,
- подготовить автотест для проверки корректности работы подсистемы «Работа с заявками клиентов»,
- загрузить результат работы в новый репозиторий на GitHub.

------

### Описание задания

Компания «Ваш компьютерный мастер» использует конфигурацию «Управление IT-фирмой» от стороннего поставщика. Вам поставлена задача добавить в конфигурацию модуль для работы с заявками на обслуживание клиентов и модуль для расчёта управленческой заработной платы.

Исходная версия конфигурации размещена в [этом репозитории](https://github.com/netology-code/fonecmid-diplom/tree/main/diplom-src). Для доработки конфигурации нужно использовать 1C:EDT. При доработке конфигурации максимально задействуйте функциональность библиотеки стандартных подсистем.

Для добавленных объектов, реквизитов, методов используйте префикс ВКМ_. Если меняется программный код существующих методов, изменения должны быть выделены комментариями.

Все добавленные объекты должны быть размещены в новой служебной подсистеме ВКМ_ДобавленныеОбъекты. В добавленных объектах не должно быть ошибок, выявляемых встроенным механизмом проверки 1C:EDT.

Для передачи результата изменённую конфигурацию загрузите в отдельный репозиторий на [github.com](https://github.com). Чтобы результаты работы можно было проверить, репозиторий должен быть публичным.

Вместе с результатами работы должны быть переданы инструкция по начальной настройке новой подсистемы и сценарий для автоматизированного тестирования модуля работы с заявками клиентов.

------

### Подробные требования к подсистемам

- [Работа с заявками клиентов](tasks/tickets.md).
- [Расчёт управленческой зарплаты](tasks/hrm.md).
- [Отчёты](tasks/reports.md).
- [Инструкция по начальной настройке](tasks/docs.md).
- [Тестирование](tasks/testing.md).

------

# Решение Каплин М.В.

### Файлы

Файлы Базы с тестовыми данными и файл конфигурации можно скачать по ссылке:
https://disk.yandex.ru/d/NY1TnJ9GBxCw1w

------

### Описание интерфейса

- В подсистему «Обслуживание клиентов» включены только те объекты, которые связаны с вопросами обслуживания клиентов.
- В подсистему «Добавленные объекты» включены все объекты необходимые для тестирования нового функционала.

------

### Инструкция по начальной настройке программы

1.	Для пользователей необходимо установить следующие роли, либо использовать одноименные профиля из конфигурации:

Для специалистов:
- Базовые права БСП
- Запуск тонкого клиента
- Добавление изменение документа обслуживание клиента
- Специалист

Для менеджеров:
- Базовые права БСП
- Добавление изменение контрагентов
- Запуск тонкого клиента
- Добавление изменение документа обслуживание клиента
- Менеджер

Для Бухгалтеров ИТ Фирмы:
- Базовые права БСП
- Добавление изменение документов покупки
- Добавление изменение документов продажи
- Добавление изменение контрагентов
- Запуск тонкого клиента
- Чтение вариантов отчетов
- Добавление изменение документа обслуживание клиента
- БухгалтерИТФирмы

Для кадровиков-рассчетчиков:
- Базовые права БСП
- Запуск тонкого клиента
- Чтение вариантов отчетов
- Добавление изменение документа начисление зарплаты
- Добавление изменение документа начисление фиксированной премии
- Добавление изменение документа выплата зарплаты
- Добавление изменение документа график отпусков
- Кадровик-рассчетчик

2. Необходимо заполнить константы:
- ТокенУправленияТелеграмБотом
- ИдентификаторГруппыДляОповещения
- НоменклатураАбонентскаяПлата
- НоменклатураРаботыСпециалиста

3. Заполнить регистр сведений «Условия оплаты сотрудников»
- Для каждого сотрудника в каждом месяце необходимо установить его оклад
- Для специалистов – процент от выполняемых работ. Для прочих сотрудников его нужно оставить нулевым.
4. Создать элементы справочника «Графики работы» (например - пятидневка).
5. С помощью обработки «Заполнение графика» заполнить регистр сведений «Графики работы». 
- В обработке необходимо выбрать тип графика работы, задать период на который необходимо заполнить регистр и указать какие дни недели будут выходными (для пятидневки например 6, 7).
6. С помощью документа «График отпусков» заполнить регистр сведений «График отпусков» за 2023 и 2024 года.
  - При проведении документа создаются записи в регистре в соответствии с указанными данными.
7. Для контрагентов нужно создать договора с видом «Абонентское обслуживание» и заполнить информацию о его условиях.

------

### Инструкция по запуску автотеста:

Описание автотеста:

Сценарий автотеста поэтапно запускает клиент тестирования под разными сотрудниками. 
- Менеджер создает документ "Обслуживание клиента", заполняет информацию о контрагенте и описание работ.
- Специалист заполняет табличную часть документа, указывает часы потраченные на работу и дает комментарий о проделанной работе. Затем документ проводится.
- Бухгалтер запускает обработку массовое создание актов по периоду в 2023 году. В результате по данным документа "Обслуживание клиента" создается реализация.
- Далее булгалтер формирует отчет по выставленным актам в данном периоде и его результат сравнивается с эталонным значением.

Полное прохождение теста дает нам понять, что цепочка документов формируется корректно и мы получаем ожидаемый результат.

Для Запуска автотеста необходимо выполнить следующую подготовку:
- Применить к своей базе изменения из файла конфигурации "Доработки по заданию.cf"
- Создать пользователя "Менеджер" со всеми правами для менеджеров из начальной настройки.
- Создать пользователя "Специалист5" со всеми правами для специалистов из начальной настройки.
- Создать пользователя "БухгалтерИТФирмы" со всеми правами для бухгалтера из начальной настройки.
- Заполнить константы "НоменклатураАбонентскаяПлата", "НоменклатураРаботыСпециалиста".
- Создать элемент справочника "Графики работы" - "Пятидневка".
- Обработкой "Заполнение графика" заполнить данные регистра "Графики работы" для графика "Пятидневка" за весь 2023 год и с выходными 6,7.
- Создать Организацию - "Моя Организация"   
- Создать контрагента с Наименованием "Контрагент1" и абонентским договором "ОсновнойДоговор1-2023". Для договора указать период действия - весь 2023 год, Абонентская плата - "15000" и стоимость часа работы "400"
- В регистре "Условия оплаты сотрудников" необходимо сделать запись для "Специалист5" на 01.10.2023 (оклад "30000", процент от работ "10")
- Перед запуском базы в дополнительных параметрах запуска указать строку: /TESTMANAGER /N Администратор /P "" /Execute "путь на диске к обработке ВанессаАвто" и запустить базу.
- Нужно создать следующие клиенты тестирования и путь к используемой базе:
  - Менеджер	        /N"Менеджер"
  - Специалист5     	/N"Специалист5"
  - БухгалтерИТФирмы	/N"БухгалтерИТФирмы"
  
![2024-05-17_17-54-03](https://github.com/Kvazar541/DiplomKMV/assets/148319677/3e55a551-6d08-4ccb-bcf0-a9232f2073f9)

- Файт автотеста - ОбщийСценарий.feature использует экспортные сценарии, поэтому необходимо создать библиотеку для экспортных сценариев и сохранить туда следующие файлы:
  - СозданиеОбслуживанияКлиентаПодМенеджером.feature
  - ЗаполнениеДокументаОбслуживаниеКлиентаПодСпециалистом.feature
  - МассовоеСозданиеАктовБухгалтер.feature
  - ФормированиеОтчетаАнализВыставленныхАктовИСравнениеЕгоСЭталоном.feature

![2024-05-17_18-08-02](https://github.com/Kvazar541/DiplomKMV/assets/148319677/a5ae0c3d-5b49-4338-a795-52dd8d1ffa9b)

После выполнения данных операций можно запустить автотест.

------
